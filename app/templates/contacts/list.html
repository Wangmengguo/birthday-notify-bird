{% extends "base.html" %}

{% block title %}è”ç³»äººç®¡ç† - Birthday Notify Bird{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
    <h1>ğŸ“‹ è”ç³»äººç®¡ç†</h1>
    <a href="/contacts/new" class="btn btn-primary">+ æ·»åŠ è”ç³»äºº</a>
</div>

{% if contacts %}
<div class="card" style="padding: 0; overflow: hidden;">
    <table>
        <thead>
            <tr>
                <th>å§“å</th>
                <th>ç”Ÿæ—¥</th>
                <th>è·ç¦»ä¸‹æ¬¡</th>
                <th>å¤‡æ³¨</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody>
            {% for contact in contacts %}
            <tr>
                <td style="font-weight: 500;">{{ contact.name }}</td>
                <td>
                    {{ contact.birthday.strftime('%Y-%m-%d') }}
                    <span style="color: var(--text-secondary); font-size: 0.85rem;">
                        ({{ contact.birthday.strftime('%mæœˆ%dæ—¥') }})
                    </span>
                </td>
                <td>
                    {% if contact.days_until == 0 %}
                        <span class="badge badge-success">ğŸ‚ ä»Šå¤©!</span>
                    {% elif contact.days_until == 1 %}
                        <span class="badge badge-warning">æ˜å¤©</span>
                    {% elif contact.days_until <= 7 %}
                        <span class="badge badge-info">{{ contact.days_until }} å¤©</span>
                    {% else %}
                        <span style="color: var(--text-secondary);">{{ contact.days_until }} å¤©</span>
                    {% endif %}
                </td>
                <td style="color: var(--text-secondary); max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                    {{ contact.note or '-' }}
                </td>
                <td>
                    <div class="actions">
                        <a href="/contacts/{{ contact.id }}/edit" class="btn btn-secondary btn-sm">ç¼–è¾‘</a>
                        <form action="/contacts/{{ contact.id }}/delete" method="POST" style="display: inline;" 
                              onsubmit="return confirm('ç¡®å®šè¦åˆ é™¤ {{ contact.name }} å—ï¼Ÿ');">
                            <button type="submit" class="btn btn-danger btn-sm">åˆ é™¤</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<p style="color: var(--text-secondary); margin-top: 1rem; font-size: 0.9rem;">
    å…± {{ contacts|length }} ä½è”ç³»äºº
</p>

{% else %}
<div class="card empty-state">
    <div class="empty-state-icon">ğŸ“‹</div>
    <h3>è¿˜æ²¡æœ‰è”ç³»äºº</h3>
    <p>æ·»åŠ ç¬¬ä¸€ä½è”ç³»äººï¼Œå¼€å§‹è®°å½•ç”Ÿæ—¥å§</p>
    <a href="/contacts/new" class="btn btn-primary" style="margin-top: 1rem;">+ æ·»åŠ è”ç³»äºº</a>
</div>
{% endif %}
{% endblock %}

